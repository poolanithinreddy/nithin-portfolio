{
  "title": "vCenter golden templates playbook",
  "summary": "How we standardized VMware lab images with post-provision scripts, compliance checks, and automated health reporting.",
  "publishedAt": "2024-04-28T00:00:00.000Z",
  "tags": [
    "VMware",
    "Automation",
    "DevOps"
  ],
  "body": {
    "raw": "\nFaculty needed consistent lab environments that could reset every week without manual babysitting. Golden templates gave us the consistency we wanted, but the playbook required a few careful steps.\n\n## Step 1: Build immutable baselines\n\nStart with a clean OS install, capture checksums, and run CIS hardening scripts. Every template gets a metadata file explaining who built it, what scripts ran, and which courses consume it.\n\n## Step 2: Post-provision customization\n\nA provisioning worker triggers PowerCLI + Ansible scripts immediately after cloning:\n\n- Inject course-specific SSH keys and jump-host routes\n- Register agents for logging/metrics\n- Run smoke tests (DNS, outbound, identity) before marking the VM as ready\n\n## Step 3: Continuous validation\n\nA nightly job rehydrates sample VMs from each template, runs compliance scans, and feeds the results into Grafana dashboards. If drift appears, we can flag the template, notify owners, and block new labs until it’s healthy.\n\n## Step 4: Retirement workflow\n\nWhen a template ages out, we snapshot it, store the artifacts in object storage, and document the replacement in the knowledge base. Faculty see the impact in the portal release notes, keeping everyone aligned.\n\nTemplates went from “mystery meat” to a predictable, observable backbone for CyberRange labs.\n",
    "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var i in e)s(n,i,{get:e[i],enumerable:!0})},o=(n,e,i,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of u(e))!b.call(n,a)&&a!==i&&s(n,a,{get:()=>e[a],enumerable:!(r=p(e,a))||r.enumerable});return n};var w=(n,e,i)=>(i=n!=null?h(m(n)):{},o(e||!n||!n.__esModule?s(i,\"default\",{value:n,enumerable:!0}):i,n)),y=n=>o(s({},\"__esModule\",{value:!0}),n);var c=g((C,l)=>{l.exports=_jsx_runtime});var x={};f(x,{default:()=>j,frontmatter:()=>k});var t=w(c()),k={title:\"vCenter golden templates playbook\",summary:\"How we standardized VMware lab images with post-provision scripts, compliance checks, and automated health reporting.\",publishedAt:\"2024-04-28\",tags:[\"VMware\",\"Automation\",\"DevOps\"]};function d(n){let e=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",ul:\"ul\",li:\"li\"},n.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:\"Faculty needed consistent lab environments that could reset every week without manual babysitting. Golden templates gave us the consistency we wanted, but the playbook required a few careful steps.\"}),`\n`,(0,t.jsx)(e.h2,{id:\"step-1-build-immutable-baselines\",children:(0,t.jsx)(e.a,{href:\"#step-1-build-immutable-baselines\",children:\"Step 1: Build immutable baselines\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Start with a clean OS install, capture checksums, and run CIS hardening scripts. Every template gets a metadata file explaining who built it, what scripts ran, and which courses consume it.\"}),`\n`,(0,t.jsx)(e.h2,{id:\"step-2-post-provision-customization\",children:(0,t.jsx)(e.a,{href:\"#step-2-post-provision-customization\",children:\"Step 2: Post-provision customization\"})}),`\n`,(0,t.jsx)(e.p,{children:\"A provisioning worker triggers PowerCLI + Ansible scripts immediately after cloning:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsx)(e.li,{children:\"Inject course-specific SSH keys and jump-host routes\"}),`\n`,(0,t.jsx)(e.li,{children:\"Register agents for logging/metrics\"}),`\n`,(0,t.jsx)(e.li,{children:\"Run smoke tests (DNS, outbound, identity) before marking the VM as ready\"}),`\n`]}),`\n`,(0,t.jsx)(e.h2,{id:\"step-3-continuous-validation\",children:(0,t.jsx)(e.a,{href:\"#step-3-continuous-validation\",children:\"Step 3: Continuous validation\"})}),`\n`,(0,t.jsx)(e.p,{children:\"A nightly job rehydrates sample VMs from each template, runs compliance scans, and feeds the results into Grafana dashboards. If drift appears, we can flag the template, notify owners, and block new labs until it\\u2019s healthy.\"}),`\n`,(0,t.jsx)(e.h2,{id:\"step-4-retirement-workflow\",children:(0,t.jsx)(e.a,{href:\"#step-4-retirement-workflow\",children:\"Step 4: Retirement workflow\"})}),`\n`,(0,t.jsx)(e.p,{children:\"When a template ages out, we snapshot it, store the artifacts in object storage, and document the replacement in the knowledge base. Faculty see the impact in the portal release notes, keeping everyone aligned.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Templates went from \\u201Cmystery meat\\u201D to a predictable, observable backbone for CyberRange labs.\"})]})}function v(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(d,n)})):d(n)}var j=v;return y(x);})();\n;return Component;"
  },
  "_id": "blog/vcenter-templates.mdx",
  "_raw": {
    "sourceFilePath": "blog/vcenter-templates.mdx",
    "sourceFileName": "vcenter-templates.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/vcenter-templates"
  },
  "type": "Post",
  "slug": "vcenter-templates",
  "url": "/blog/vcenter-templates"
}